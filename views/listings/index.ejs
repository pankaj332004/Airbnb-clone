<%- layout("/layouts/boilerplate") %>
<style>
    #filters {
    display: flex;
    align-items: center;     /* vertical alignment */
    gap: 2rem;
    margin-top: 1rem;
    overflow-x: auto;        /* allow horizontal scroll */
    white-space: nowrap;     /* prevent wrapping */
    padding: 0 1rem;
}

#filters::-webkit-scrollbar {
    display: none;           /* hide scrollbar (Chrome) */
}

.filter {
    flex: 0 0 auto;          /* prevents shrinking */
    text-align: center;
    opacity: 0.7;
    margin: 0;
}

.filter:hover {
    opacity: 1;
    cursor: pointer;
}

.tax-toogle {
    flex: 0 0 auto;          /* keep toggle in same row */
    margin-left: auto;
    border: 1px solid black; 
    border-radius: 1rem;
    height: 3.5rem;
     
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 1rem;    /* pushes toggle to right side */
}
.tax-info{
    display: none;
}

</style>
<div id="filters">
    <div class="filter">
        <div><i class="fa-solid fa-fire"></i></div>
        <p>Trending</p>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-bed"></i></div>
        <p>Rooms</p>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-mountain-city"></i></i></div>
        <p>Iconic Cities</p>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-mountain"></i></i></div>
        <p>Mountains</p>
    </div>
    <div class="filter">
        <div><i class="fa-brands fa-fort-awesome"></i></i></div>
        <p>Castels</p>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-person-swimming"></i></i></div>
        <p>Amazing pools</p>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-campground"></i></div>
        <p>Camping</p>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-cow"></i></i></div>
        <p>Farms</p>
    </div>
    <div class="filter">
        <div><i class="fa-regular fa-snowflake"></i></i></div>
        <p>Arctic</p>
    </div>
    <div class="filter">
        <div><i class="fa-solid fa-heart"></i></div>
        <p>Whislist</p>
    </div>
    <div class="filter">
        <i class="fa-solid fa-igloo"></i>
        <p>Dome</p>
    </div>

    <div class="tax-toogle">
        <div class="form-check-reverse form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
            <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
        </div>
    </div>
</div>


<div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3">
    <% allListings.forEach(listing => {%>
    <a href="/listings/<%= listing._id %>" class="listing-links">
    <div class="card col listing-card">
        <div class="card-img-overlay"> WanderLust </div>
        <img src="<%= listing.image?.url || listing.image || 'https://via.placeholder.com/300' %>"
        class="card-img-top" alt="listing_image" style=" height:20rem;">
        <div class="card-body">
            <p class="card-text">
                <b><%= listing.title %></b>
                <br>
                <%= listing.description %>
                <br>
                <strong>Price: </strong>&#8377; <%= (typeof listing.price === "number") ? listing.price.toLocaleString("en-IN") : "N/A" %> per night
                <i class="tax-info">&nbsp; &nbsp;+18% GST</i>
                <br>
                <strong>Location: </strong><%= listing.location %>, <%= listing.country %>
            </p>
        </div>
    </div>
    </a>
    <% }) %>
</div>

<script>
    const taxToggle = document.querySelector("#switchCheckDefault");
    taxToggle.addEventListener("click", function() {
        let taxInfo = document.getElementsByClassName("tax-info");
        for(info of taxInfo) {
            if(info.style.display === "none") {
                info.style.display = "inline";
            } else {
                info.style.display = "none";
            }
        }
    });
</script>

